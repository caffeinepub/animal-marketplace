{
  "kind": "feature_evidence_report",
  "features": [
    {
      "featureId": "feature-in-frontend-src-app-tsx-fix-the-cattletrackerrouteguard-for-the-tracker-route-so-that-it-correctly-grants-access-to-the-authenticated-user-whose-principal-string-is-rhoqt-xhqg1-66ofc-khas4-fm4w6-73h56-vt55b-5bfnp-adgps-qxwoy-iqe-the-guard-must-1-while-authentication-state-is-still-loading-render-a-loading-spinner-and-not-redirect-2-only-redirect-to-when-loading-is-complete-and-the-authenticated-principal-does-not-match-rhoqt-xhqg1-66ofc-khas4-fm4w6-73h56-vt55b-5bfnp-adgps-qxwoy-iqe-3-use-the-principal-string-obtained-directly-from-the-internet-identity-context-e-g-identity-getprincipal-totext-for-comparison-do-not-rely-on-any-async-backend-query-that-may-not-have-resolved-yet-ensure-the-comparison-trims-whitespace-and-is-an-exact-string-match",
      "featureTitle": "In frontend/src/App.tsx, fix the CattleTrackerRouteGuard for the '/tracker' route so that it correctly grants access to the authenticated user whose principal string is 'rhoqt-xhqg1-66ofc-khas4-fm4w6-73h56-vt55b-5bfnp-adgps-qxwoy-iqe'. The guard must: (1) while authentication state is still loading, render a loading spinner and NOT redirect; (2) only redirect to '/' when loading is complete AND the authenticated principal does NOT match 'rhoqt-xhqg1-66ofc-khas4-fm4w6-73h56-vt55b-5bfnp-adgps-qxwoy-iqe'; (3) use the principal string obtained directly from the Internet Identity context (e.g. identity?.getPrincipal().toText()) for comparison â€” do not rely on any async backend query that may not have resolved yet. Ensure the comparison trims whitespace and is an exact string match.",
      "files": [
        "frontend/src/App.tsx"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "qr-code@1.0.0",
        "camera@1.0.0"
      ],
      "testIds": [
        "REQ-120"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-in-frontend-src-hooks-usequeries-ts-or-the-equivalent-utility-hook-file-fix-the-useiscattletrackeruser-hook-to-derive-the-owner-principal-check-synchronously-from-the-internet-identity-context-rather-than-from-an-async-backend-query-the-hook-must-1-read-the-principal-string-directly-from-the-identity-object-e-g-identity-getprincipal-totext-2-return-true-immediately-when-the-principal-matches-rhoqt-xhqg1-66ofc-khas4-fm4w6-73h56-vt55b-5bfnp-adgps-qxwoy-iqe-3-return-false-while-loading-or-unauthenticated-4-never-throw-or-surface-errors-to-the-ui",
      "featureTitle": "In frontend/src/hooks/useQueries.ts (or the equivalent utility hook file), fix the useIsCattleTrackerUser() hook to derive the owner principal check synchronously from the Internet Identity context rather than from an async backend query. The hook must: (1) read the principal string directly from the identity object (e.g. identity?.getPrincipal().toText()); (2) return true immediately when the principal matches 'rhoqt-xhqg1-66ofc-khas4-fm4w6-73h56-vt55b-5bfnp-adgps-qxwoy-iqe'; (3) return false while loading or unauthenticated; (4) never throw or surface errors to the UI.",
      "files": [
        "frontend/src/hooks/useQueries.ts"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "qr-code@1.0.0",
        "camera@1.0.0"
      ],
      "testIds": [
        "REQ-121"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-in-frontend-src-components-layout-tsx-add-a-prominently-styled-navigation-button-labelled-admin-panel-at-the-very-top-of-the-mobile-side-menu-this-button-must-route-to-tracker-the-cattle-tracker-page-it-must-be-completely-absent-from-the-dom-not-just-hidden-via-css-for-all-users-whose-authenticated-principal-does-not-match-rhoqt-xhqg1-66ofc-khas4-fm4w6-73h56-vt55b-5bfnp-adgps-qxwoy-iqe-and-for-unauthenticated-visitors-the-visibility-check-must-use-the-authenticated-user-s-principal-string-directly-not-an-async-backend-query-while-authentication-state-is-loading-treat-the-button-as-hidden-position-it-above-all-other-side-menu-items-style-it-with-a-bold-attention-grabbing-appearance-consistent-with-the-professional-blue-theme-e-g-a-filled-professional-blue-button-with-white-bold-text-labelled-admin-panel",
      "featureTitle": "In frontend/src/components/Layout.tsx, add a prominently styled navigation button labelled 'ADMIN PANEL' at the very top of the mobile/side menu. This button must route to '/tracker' (the Cattle Tracker page). It must be completely absent from the DOM (not just hidden via CSS) for all users whose authenticated principal does not match 'rhoqt-xhqg1-66ofc-khas4-fm4w6-73h56-vt55b-5bfnp-adgps-qxwoy-iqe' and for unauthenticated visitors. The visibility check must use the authenticated user's principal string directly (not an async backend query). While authentication state is loading, treat the button as hidden. Position it above all other side menu items. Style it with a bold, attention-grabbing appearance consistent with the Professional Blue theme (e.g., a filled Professional Blue button with white bold text labelled 'ADMIN PANEL').",
      "files": [
        "frontend/src/components/Layout.tsx"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "qr-code@1.0.0",
        "camera@1.0.0"
      ],
      "testIds": [
        "REQ-122"
      ],
      "confidence": "high"
    }
  ]
}