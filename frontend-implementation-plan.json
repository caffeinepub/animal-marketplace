{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix Bottom Nav Z-Index & Pointer Events (Version 55)",
  "requirements": [
    {
      "id": "REQ-184",
      "summary": "Set z-index: 999 on the bottom navigation bar's root container so it renders above all other page content and overlays",
      "acceptanceCriteria": [
        "The bottom navigation bar's root container has z-index 999 or higher.",
        "The bar is visually rendered on top of all page content and background layers."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/BottomNav.tsx",
          "operation": "modify",
          "description": "Add z-[999] Tailwind class to the bottom navigation bar's root <nav> element to ensure it renders above all other page content, overlays, and background elements."
        }
      ]
    },
    {
      "id": "REQ-185",
      "summary": "Set pointer-events: auto and position: relative on all five bottom nav tab buttons to ensure reliable tap/click interactions",
      "acceptanceCriteria": [
        "Clicking/tapping the Home, Chats, Sell, My Ads, and Account tabs all trigger their respective navigation actions.",
        "No tab button is blocked by an overlapping element."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/BottomNav.tsx",
          "operation": "modify",
          "description": "Add pointer-events-auto and relative Tailwind classes to each of the five tab buttons (Home, Chats, Sell, My Ads, Account) so that all tap/click interactions are reliably received regardless of overlapping layers."
        }
      ]
    },
    {
      "id": "REQ-186",
      "summary": "Apply z-index: 999 and isolation: isolate to the floating circular 'Sell' button to ensure it floats above all elements and receives pointer events",
      "acceptanceCriteria": [
        "The Sell button has z-index 999 and is clickable.",
        "The Sell button visually floats above the navigation bar without being obscured."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/BottomNav.tsx",
          "operation": "modify",
          "description": "Add z-[999] and isolate Tailwind classes to the floating circular 'Sell' button specifically, ensuring it also floats above all other elements and receives pointer events correctly."
        }
      ]
    },
    {
      "id": "REQ-187",
      "summary": "Apply pointer-events: none to all decorative background containers in Layout.tsx and HomePage.tsx so they cannot intercept clicks",
      "acceptanceCriteria": [
        "Decorative background/overlay divs in Layout.tsx and HomePage.tsx have pointer-events: none.",
        "No background layer intercepts clicks on the bottom navigation bar or other interactive elements."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Audit all decorative background containers (including any hero image containers, header background layers, and any full-viewport overlay divs). Apply pointer-events-none Tailwind class to every purely decorative or background-layer element so they cannot intercept clicks intended for interactive elements."
        },
        {
          "path": "frontend/src/pages/HomePage.tsx",
          "operation": "modify",
          "description": "Audit all decorative background containers (including the hero banner background, any overlay divs, and background image containers). Apply pointer-events-none Tailwind class to every purely decorative or background-layer element so they cannot intercept clicks intended for interactive elements beneath or above them."
        }
      ]
    },
    {
      "id": "REQ-188",
      "summary": "Audit all page-level components for full-width/full-height containers that may overlap the bottom nav and apply pointer-events: none to decorative containers",
      "acceptanceCriteria": [
        "On every page, all five bottom nav tabs are tappable without interference from page content layers.",
        "No full-height page container has a z-index that competes with z-[999] on the bottom nav."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/PostAdPage.tsx",
          "operation": "modify",
          "description": "Audit for any full-width/full-height containers that may inadvertently have pointer-events enabled and are stacked at a z-index that overlaps the bottom nav bar. Add pointer-events-none to any such decorative containers and ensure the page content wrapper does not exceed the viewport in a way that causes z-index conflicts with the bottom nav."
        },
        {
          "path": "frontend/src/pages/ListingDetailPage.tsx",
          "operation": "modify",
          "description": "Audit for any full-width/full-height containers that may inadvertently have pointer-events enabled and are stacked at a z-index that overlaps the bottom nav bar. Add pointer-events-none to any such decorative containers and ensure the page content wrapper does not exceed the viewport in a way that causes z-index conflicts with the bottom nav."
        },
        {
          "path": "frontend/src/pages/MessagesPage.tsx",
          "operation": "modify",
          "description": "Audit for any full-width/full-height containers that may inadvertently have pointer-events enabled and are stacked at a z-index that overlaps the bottom nav bar. Add pointer-events-none to any such decorative containers and ensure the page content wrapper does not exceed the viewport in a way that causes z-index conflicts with the bottom nav."
        },
        {
          "path": "frontend/src/pages/ProfilePage.tsx",
          "operation": "modify",
          "description": "Audit for any full-width/full-height containers that may inadvertently have pointer-events enabled and are stacked at a z-index that overlaps the bottom nav bar. Add pointer-events-none to any such decorative containers and ensure the page content wrapper does not exceed the viewport in a way that causes z-index conflicts with the bottom nav."
        },
        {
          "path": "frontend/src/pages/UserDashboardPage.tsx",
          "operation": "modify",
          "description": "Audit for any full-width/full-height containers that may inadvertently have pointer-events enabled and are stacked at a z-index that overlaps the bottom nav bar. Add pointer-events-none to any such decorative containers and ensure the page content wrapper does not exceed the viewport in a way that causes z-index conflicts with the bottom nav."
        },
        {
          "path": "frontend/src/pages/SignUpPage.tsx",
          "operation": "modify",
          "description": "Audit for any full-width/full-height containers that may inadvertently have pointer-events enabled and are stacked at a z-index that overlaps the bottom nav bar. Add pointer-events-none to any such decorative containers and ensure the page content wrapper does not exceed the viewport in a way that causes z-index conflicts with the bottom nav."
        }
      ]
    },
    {
      "id": "REQ-189",
      "summary": "Verify that the 'Actor not available' comprehensive fix from previous versions is still intact and active, re-applying it if any regression is detected",
      "acceptanceCriteria": [
        "The useSignUp mutation polls for actor availability and does not throw 'Actor not available' during normal operation.",
        "The SignUpPage 'Create Account' button is disabled with 'Connecting...' label while the actor is initializing.",
        "The CattleTrackerRouteGuard reads principal from the identity context directly, not from an async backend query.",
        "The AdminRouteGuard shows a loading spinner while isAdmin is loading and only redirects when loading is complete."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useActor.ts",
          "operation": "modify",
          "description": "Verify that the actor initialization includes polling for actor availability for up to 3 seconds. If the actor is unavailable after polling, throw 'Connection not ready. Please wait a moment and try again.' If any regression is detected, re-apply the fix."
        },
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Verify that the useSignUp mutation (and any other mutations) poll for actor availability before executing, throwing 'Connection not ready. Please wait a moment and try again.' if unavailable. If any regression is detected, re-apply the fix."
        },
        {
          "path": "frontend/src/pages/SignUpPage.tsx",
          "operation": "modify",
          "description": "Verify that the 'Create Account' button is disabled with 'Connecting...' label while the actor is initializing (using the isFetching state from useActor). If any regression is detected, re-apply the fix."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Verify that the CattleTrackerRouteGuard reads the principal directly from identity?.getPrincipal().toText() instead of an async backend query. Verify that the AdminRouteGuard shows a loading spinner while isAdmin is loading and only redirects when loading is complete. If any regression is detected, re-apply the fix."
        }
      ]
    },
    {
      "id": "REQ-190",
      "summary": "Update the visible version label displayed in the app to 'Version 55'",
      "acceptanceCriteria": [
        "The version label reads 'Version 55' wherever it appears in the app UI.",
        "No other version strings ('Version 54' or earlier) remain visible."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Find the version string in the Layout component (likely in the header or footer) and update it to read 'Version 55'. Ensure no other version strings remain visible."
        }
      ]
    }
  ]
}